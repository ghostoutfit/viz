<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>What This Room Reaches Toward</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { background: #0a0a12; }
    @import url('https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600&family=Instrument+Serif:ital@0;1&display=swap');
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Instrument+Sans:wght@400;500;600&family=Instrument+Serif:ital@0;1&display=swap" rel="stylesheet">
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState } = React;

    // Teacher data
    const teachers = [
      { name: "Maria", years: 22, selections: ["capable", "arguing", "voice"] },
      { name: "Derek", years: 3, selections: ["capable", "wonder", "curiosity"] },
      { name: "Patricia", years: 15, selections: ["wonder", "questions", "curiosity"] },
      { name: "James", years: 1, selections: ["capable", "arguing", "curiosity"] },
      { name: "Anita", years: 8, selections: ["voice", "messiness", "capable"] },
      { name: "Robert", years: 28, selections: ["capable", "messiness", "arguing"] },
      { name: "Keisha", years: 5, selections: ["voice", "capable", "wonder"] },
      { name: "Tom", years: 12, selections: ["arguing", "curiosity", "capable"] },
      { name: "Susan", years: 2, selections: ["wonder", "curiosity", "messiness"] },
      { name: "Victor", years: 18, selections: ["capable", "messiness", "voice"] },
    ];

    const aspirations = {
      capable: { label: "Students seeing themselves as capable of figuring things out", short: "Capable of figuring it out", count: 9 },
      curiosity: { label: "Curiosity driving what happens next", short: "Curiosity-driven", count: 5 },
      arguing: { label: "Kids arguing productively about ideas", short: "Productive argument", count: 4 },
      voice: { label: "Every student's voice shaping the conversation", short: "Every voice matters", count: 4 },
      messiness: { label: "Messiness and revision as signs of real thinking", short: "Messiness as thinking", count: 4 },
      wonder: { label: "Wonder about the everyday world", short: "Everyday wonder", count: 4 },
      questions: { label: "Students asking questions I hadn't anticipated", short: "Unexpected questions", count: 1 },
    };

    function ConstellationMap() {
      const [hoveredAspiration, setHoveredAspiration] = useState(null);
      const [hoveredTeacher, setHoveredTeacher] = useState(null);

      // Position aspirations in a circular layout with "capable" at center
      const positions = {
        capable: { x: 50, y: 50 },
        curiosity: { x: 25, y: 25 },
        arguing: { x: 75, y: 22 },
        voice: { x: 20, y: 60 },
        messiness: { x: 80, y: 55 },
        wonder: { x: 35, y: 82 },
        questions: { x: 70, y: 85 },
      };

      // Teacher positions clustered near their selections
      const teacherPositions = teachers.map((t, i) => {
        const avgX = t.selections.reduce((sum, s) => sum + positions[s].x, 0) / t.selections.length;
        const avgY = t.selections.reduce((sum, s) => sum + positions[s].y, 0) / t.selections.length;
        const angle = (i / teachers.length) * Math.PI * 2;
        const offset = 8;
        return {
          ...t,
          x: avgX + Math.cos(angle) * offset,
          y: avgY + Math.sin(angle) * offset,
        };
      });

      const getConnections = () => {
        if (hoveredTeacher) {
          const teacher = teacherPositions.find(t => t.name === hoveredTeacher);
          return teacher.selections.map(s => ({
            from: { x: teacher.x, y: teacher.y },
            to: positions[s],
            key: `${teacher.name}-${s}`
          }));
        }
        if (hoveredAspiration) {
          return teacherPositions
            .filter(t => t.selections.includes(hoveredAspiration))
            .map(t => ({
              from: { x: t.x, y: t.y },
              to: positions[hoveredAspiration],
              key: `${t.name}-${hoveredAspiration}`
            }));
        }
        return [];
      };

      const connections = getConnections();

      return (
        <div style={{
          minHeight: '100vh',
          background: '#0a0a12',
          padding: '40px',
          fontFamily: "'Instrument Sans', -apple-system, sans-serif",
        }}>
          <div style={{ maxWidth: '1000px', margin: '0 auto' }}>
            <h1 style={{
              fontFamily: "'Instrument Serif', Georgia, serif",
              fontSize: '42px',
              fontWeight: 400,
              color: '#fff',
              marginBottom: '8px',
              letterSpacing: '-0.5px',
            }}>
              What This Room Reaches Toward
            </h1>
            <p style={{
              color: 'rgba(255,255,255,0.5)',
              fontSize: '16px',
              marginBottom: '50px',
            }}>
              10 teachers, 7 aspirations — hover to explore connections
            </p>

            <div style={{
              position: 'relative',
              width: '100%',
              paddingBottom: '80%',
              background: 'radial-gradient(ellipse at center, rgba(30,30,50,0.5) 0%, transparent 70%)',
              borderRadius: '20px',
            }}>
              <svg
                viewBox="0 0 100 100"
                style={{
                  position: 'absolute',
                  top: 0,
                  left: 0,
                  width: '100%',
                  height: '100%',
                }}
              >
                {/* Connection lines */}
                {connections.map(conn => (
                  <line
                    key={conn.key}
                    x1={conn.from.x}
                    y1={conn.from.y}
                    x2={conn.to.x}
                    y2={conn.to.y}
                    stroke="rgba(255,200,100,0.4)"
                    strokeWidth="0.3"
                  />
                ))}

                {/* Aspiration nodes */}
                {Object.entries(positions).map(([key, pos]) => {
                  const asp = aspirations[key];
                  const isHovered = hoveredAspiration === key;
                  const isConnected = hoveredTeacher && teacherPositions.find(t => t.name === hoveredTeacher)?.selections.includes(key);
                  const baseSize = Math.sqrt(asp.count) * 2.5;
                  const size = isHovered || isConnected ? baseSize * 1.3 : baseSize;
                  const opacity = (!hoveredAspiration && !hoveredTeacher) || isHovered || isConnected ? 1 : 0.3;

                  return (
                    <g key={key}>
                      {/* Glow */}
                      <circle
                        cx={pos.x}
                        cy={pos.y}
                        r={size * 2}
                        fill={`rgba(255,180,100,${opacity * 0.1})`}
                      />
                      {/* Core */}
                      <circle
                        cx={pos.x}
                        cy={pos.y}
                        r={size}
                        fill={`rgba(255,200,120,${opacity * 0.9})`}
                        style={{ cursor: 'pointer', transition: 'all 0.3s ease' }}
                        onMouseEnter={() => setHoveredAspiration(key)}
                        onMouseLeave={() => setHoveredAspiration(null)}
                      />
                    </g>
                  );
                })}

                {/* Teacher dots */}
                {teacherPositions.map(teacher => {
                  const isHovered = hoveredTeacher === teacher.name;
                  const isConnected = hoveredAspiration && teacher.selections.includes(hoveredAspiration);
                  const opacity = (!hoveredAspiration && !hoveredTeacher) || isHovered || isConnected ? 1 : 0.2;

                  return (
                    <circle
                      key={teacher.name}
                      cx={teacher.x}
                      cy={teacher.y}
                      r={isHovered ? 1.8 : 1.2}
                      fill={`rgba(150,180,255,${opacity})`}
                      style={{ cursor: 'pointer', transition: 'all 0.3s ease' }}
                      onMouseEnter={() => setHoveredTeacher(teacher.name)}
                      onMouseLeave={() => setHoveredTeacher(null)}
                    />
                  );
                })}
              </svg>

              {/* Labels */}
              {Object.entries(positions).map(([key, pos]) => {
                const asp = aspirations[key];
                const isHovered = hoveredAspiration === key;
                const isConnected = hoveredTeacher && teacherPositions.find(t => t.name === hoveredTeacher)?.selections.includes(key);
                const opacity = (!hoveredAspiration && !hoveredTeacher) || isHovered || isConnected ? 1 : 0.3;

                return (
                  <div
                    key={`label-${key}`}
                    style={{
                      position: 'absolute',
                      left: `${pos.x}%`,
                      top: `${pos.y + 6}%`,
                      transform: 'translateX(-50%)',
                      color: `rgba(255,255,255,${opacity})`,
                      fontSize: key === 'capable' ? '13px' : '11px',
                      fontWeight: key === 'capable' ? 500 : 400,
                      textAlign: 'center',
                      maxWidth: '120px',
                      transition: 'all 0.3s ease',
                      pointerEvents: 'none',
                    }}
                  >
                    {asp.short}
                  </div>
                );
              })}
            </div>

            {/* Info panel */}
            <div style={{
              marginTop: '40px',
              padding: '24px',
              background: 'rgba(255,255,255,0.03)',
              borderRadius: '12px',
              minHeight: '80px',
            }}>
              {hoveredAspiration && (
                <div>
                  <div style={{ color: 'rgba(255,200,120,1)', fontSize: '18px', marginBottom: '8px' }}>
                    {aspirations[hoveredAspiration].label}
                  </div>
                  <div style={{ color: 'rgba(255,255,255,0.6)', fontSize: '14px' }}>
                    Selected by {aspirations[hoveredAspiration].count} of 10 teachers
                    {aspirations[hoveredAspiration].count === 9 && " — nearly everyone in this room"}
                  </div>
                </div>
              )}
              {hoveredTeacher && (
                <div>
                  <div style={{ color: 'rgba(150,180,255,1)', fontSize: '18px', marginBottom: '8px' }}>
                    {hoveredTeacher} · {teacherPositions.find(t => t.name === hoveredTeacher)?.years} years teaching
                  </div>
                  <div style={{ color: 'rgba(255,255,255,0.6)', fontSize: '14px' }}>
                    {teacherPositions.find(t => t.name === hoveredTeacher)?.selections.map(s => aspirations[s].short).join(' · ')}
                  </div>
                </div>
              )}
              {!hoveredAspiration && !hoveredTeacher && (
                <div style={{ color: 'rgba(255,255,255,0.4)', fontSize: '14px', fontStyle: 'italic' }}>
                  Hover over a star (aspiration) or a point (teacher) to explore
                </div>
              )}
            </div>
          </div>
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<ConstellationMap />);
  </script>
</body>
</html>
